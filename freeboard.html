<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>連珠盤</title>
  <style>
    body { font-family: sans-serif; }
    #controls { margin: 10px 0; }
    canvas { border: 1px solid #ccc; }
    label { margin-right: 10px; }

    #gifSettingsPopup {
  display: none;
  position: fixed;
  top: 20%;
  left: 30%;
  width: 40%;
  background: #fff;
  border: 2px solid #333;
  padding: 15px;
  z-index: 1000;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

  </style>
</head>
<body>
  〇使い方<br>
  自由に置けるだけの盤です。私の<a href="https://www.youtube.com/channel/UCfbgN9hrrh9fmFKs8gxln5g">動画編集用</a>に作成しました。特殊な機能はありません。大会集計ツールは<a href="index.html">こちら</a><br>
  通常モードでは黒白交互に石を置けます。<br>
  左クリック→着手<br>
  右クリック→一手戻す<br>
  自由配置モードでは、<br>
  左クリック→黒石<br>
  右クリック→白石<br>
  二回クリックすると石が消えます。
  <div id="controls">
    <button id="toggleModeBtn">自由配置モードに切替</button>
    <button id="saveBoardPng">PNG保存</button>
<button id="saveBoardCropBtn">PNG指定範囲保存</button>
<!-- PNGプレビューポップアップ -->
<div id="pngPreviewPopup" style="display:none;
  position:fixed; top:10%; left:20%; width:60%;
  background:#fff; border:2px solid #333; padding:15px;
  z-index:2100; box-shadow:0 0 15px rgba(0,0,0,0.5); text-align:center;">
  <h3>PNGプレビュー（指定範囲）</h3>
  <div>
    <label>余白(路数): 
      <input type="number" id="cropMargin" value="2" min="0" max="10">
    </label>
  </div>
  <div style="margin-top:5px;">
    <label><input type="checkbox" id="showOuterFrame" checked> 外枠を描画</label><br>
    <label><input type="checkbox" id="showExtraMargin" checked> 上下左右の外側余白を追加</label><br>
    <label><input type="checkbox" id="showCoordinates" checked> 座標を表示</label><br>
  </div>
  <div id="pngPreviewContent" style="margin-top:10px;"></div>
  <br>
  <button id="downloadCropPngBtn">保存</button>
  <button id="closePngPreview">閉じる</button>
</div>





    <!-- ★ GIF保存詳細設定ポップアップ -->
<button id="gifSettingsBtn">GIF保存詳細設定</button>
<div id="gifSettingsPopup">
  <h3>GIF保存詳細設定</h3>

  <label>開始手数: <input type="number" id="gifStartMove" value="1" min="1"></label><br>
  <label>更新間隔(秒): <input type="number" id="gifInterval" value="0.5" step="0.1"></label><br>
  <label>最初フレーム静止(秒): <input type="number" id="gifFirstDelay" value="1" step="0.1"></label><br>
  <label>最終フレーム静止(秒): <input type="number" id="gifLastDelay" value="2" step="0.1"></label><br><hr>

  <label>・下記情報を最終フレームのみ反映</label><br>
  <label><input type="checkbox" id="finalNumber"> 数字</label><br>
  <label><input type="checkbox" id="finalAlpha"> アルファベット</label><br><hr>

  上段コメント(最終フレーム):<br>
  <textarea id="finalCommentTop" rows="2" style="width:95%;"></textarea><br>
  下段コメント(最終フレーム):<br>
  <textarea id="finalCommentBottom" rows="2" style="width:95%;"></textarea><br><br>


  <button id="closeGifSettings">閉じる</button>
</div>
<button id="previewGifBtn">GIF保存</button>
<!-- 最終フレームプレビューポップアップ -->
<!-- GIF全体プレビューポップアップ -->
<div id="gifPreviewPopup" style="display:none;
  position:fixed; top:10%; left:20%; width:60%;
  background:#fff; border:2px solid #333; padding:15px;
  z-index:2000; box-shadow:0 0 15px rgba(0,0,0,0.5); text-align:center;">
  <h3>GIFプレビュー</h3>
  <div id="gifPreviewContent"></div>
  <br>
  <button id="saveGifBtn">保存</button>
  <button id="closeGifPreview">閉じる</button>
</div>


    <br>
    <!-- ★ 追加部分 -->
    <label><input type="checkbox" id="inputNumber"> 数字を入力</label>
    <label><input type="checkbox" id="inputAlpha"> アルファベットを入力</label>
    <button id="clearLabels">入力文字削除</button>
    <br><button id="generateLinkBtn">リンク生成＆コピー</button>
    <br>
    <input type="text" id="generatedLink" readonly style="width:60%;">
  </div>
  <br>
  <div id="board"></div>
  <div id="controls">
  <button id="undoAllBtn">全て戻す</button>
  <button id="undoBtn">一手戻す</button>
  <button id="redoBtn">一手進める</button>
  <button id="redoAllBtn">全て進める</button>
    <button id="copySgfBtn">SGFコピー</button>
<div id="currentKifu"></div>
</div>
<div id="freeModeControls" style="display:none; margin-top:5px;">
  <label><input type="checkbox" id="placeBlack"> 黒石配置モード</label>
  <label><input type="checkbox" id="placeWhite"> 白石配置モード</label>
</div>

  <div style="margin-top:10px; text-align:left;">
    <textarea id="kifuInput" rows="3"
              style="width:40%; font-family:monospace;"
              placeholder="ここに棋譜を入力 (例: h8i9h10...)"></textarea>
  </div>

  <!-- コメント欄 -->
  <div style="margin-top:10px;">
    上段コメント:画像保存時、盤の上側に入力したテキストが表示されます。<br>
    <textarea id="commentTop" rows="2" style="width:60%;"></textarea>
  </div>
  <div style="margin-top:10px;">
    下段コメント:画像保存時、盤の下側に入力したテキストが表示されます。<br>
    <textarea id="commentBottom" rows="2" style="width:60%;"></textarea>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/gif.js.optimized/dist/gif.js"></script>
   <script src="renjuboard.js"></script>
  <script src="tournamentanalysis.js"></script> 
 

 
</body>
</html>


